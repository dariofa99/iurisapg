$(document).ready(ListarTabla(0));function storeActuacion(c){var f=validateForm(c);if(f<=0){$("#myModal_act_create").modal("hide");$("#myModal_act_add_revision").modal("hide");
$("#wait").css("display","block");var e="#"+c;var a="/actuaciones";var b=$("#token").val();var d=new FormData(document.getElementById(c));console.log(d);
$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"POST",datatype:"json",data:d,cache:false,contentType:false,processData:false,success:function(g){$("#msg-success").fadeIn();
$(e)[0].reset();ListarTabla(0);$("#wait").css("display","none");},error:function(h,i,g){alert("Hubo un error con el servidor ERROR::"+g,i);}});}}function ListarTabla(c){var d=$("#id_control_list").val();
if(d){var a="/actuaciones";var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"GET",datatype:"json",data:{id_control_list:d,bandera:c},success:function(e){llenarTabla(e);
},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});}}function llenarTabla(h){var c=$("#datos");c.html("");var g;var f;var i;
var a;var j;var e="";var b="";var d="";console.log(h);$(h).each(function(m,n){var o=false;var l=false;$(n.children).each(function(p,q){if(q.actestado=="4"){o=true;
console.log(o);}if(q.actestado=="1"){l=true;}});if(n.parent.actdocnomgen!=""){i="/actpdfdownload/"+n.parent.id+"/estudiante";a="Descargar Archivo ";btnDescargaArchivoEs="<a href='"+i+"' target='_blank' >"+a+"</a>";
}else{a="Sin Archivo";btnDescargaArchivoEs="<label>"+a+"</label>";}if(n.parent.actestado=="1"){g="Enviado a revisión";f="green";if(n.user.name=="estudiante"){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-primary btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Editar </button> ";
b+=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='eliminarAct(this);' class='btn btn-danger btn-sm'  >Eliminar</button>";}if(n.user.name=="docente"){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-primary btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Revisar </button> ";
}}else{if(n.parent.actestado=="2"){g="Realizar correcciones";f="yellow";e="";if(n.user.name=="estudiante"){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-primary btn-sm' data-toggle='modal' data-target='#myModal_act_add_revision'  > Agregar Corrección </button> ";
b+=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}if(n.user.name=="docente"){if(n.children.length<=0){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-warning btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Editar Revisón </button> ";
}else{b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}}}else{if(n.parent.actestado=="3"){g="Enviado con correcciones";f="red";e="disabled";}else{if(n.parent.actestado=="4"){g="Aprobado";f="blue";e="";o=true;
if(n.user.name=="estudiante"){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}if(n.user.name=="docente"){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}}else{if(actestado=="0"){g=".";f="blue";e="";}else{g="No especificado";f="ora";e="";}}}}}btnEdit="<button "+e+' type="button" value="'+n.id+'"  OnClick="Mostrar(this);" id="btnActDoc'+n.id+'" class="btn btn-warning waves-effect waves-light btn-act-doc"  data-toggle="modal" data-target="#myModal_act_edit_doc" data-placement="top" data-original-title="Actualizar Archivo">';
btnEdit+='<i class="fa fa-edit"> </i></button>';btnDetalle="";if(n.children.length>0){var k=0;$(n.children).each(function(p,q){if(q.actdocnomgen!=""){i="/actpdfdownload/"+q.id+"/estudiante";
a="Descargar Archivo ";btnDescargaArchivoChild="<a href='"+i+"' target='_blank' >"+a+"</a> ";}else{i="#"+q.id;a="Sin Archivo";btnDescargaArchivoChild="<label>Sin archivo</label> ";
}if(q.actestado=="1"){actuacion_estado_child="Enviado a revisión";color_child="green";e="";if(n.user.name=="estudiante"){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-primary btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Editar </button> ";
d+=" <button "+e+" type='button' value="+q.id+"  OnClick='eliminarAct(this);' class='btn btn-danger btn-sm'  >Eliminar</button>";}if(n.user.name=="docente"){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-primary btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Revisar </button> ";
}}else{if(q.actestado=="2"){actuacion_estado_child="Realizar correcciones";color_child="yellow";e="";if(n.user.name=="estudiante"){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}if(n.user.name=="docente"){if(!l&&k==0){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-warning btn-sm' data-toggle='modal' data-target='#myModal_act_edit'  > Editar Revisión </button> ";
}else{d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}}}else{if(q.actestado=="3"){actuacion_estado_child="Enviado con correcciones";color_child="red";e="disabled";}else{if(q.actestado=="4"){actuacion_estado_child="Aprobado";
color_child="blue";e="";if(n.user.name=="estudiante"){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}if(n.user.name=="docente"){d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
}}else{if(actestado=="0"){actuacion_estado_child=".";color_child="blue";e="";}else{actuacion_estado_child="No especificado";color_child="ora";e="";}}}}}if(o){b=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
d=" <button "+e+" type='button' value="+q.id+"  OnClick='Mostrar(this);' class='btn btn-success btn-sm' data-toggle='modal' data-target='#myModal_act_details'  > Detalles </button> ";
if(n.user.name=="amatai"){b+=" <button "+e+" type='button' value="+n.parent.id+"  OnClick='eliminarAct(this);' class='btn btn-danger btn-sm'  >Eliminar</button>";
d+=" <button "+e+" type='button' value="+q.id+"  OnClick='eliminarAct(this);' class='btn btn-danger btn-sm'  >Eliminar</button>";}}k++;c.prepend("<tr><td  colspan='6'> <tr><td><i class='fa fa-reply' style='transform:rotate(180deg)'> &nbsp; </i>  "+q.actnombre+"</td><td>"+q.actdescrip+"</td><td><span class='pull-center badge bg-"+color_child+"'>"+actuacion_estado_child+"</span></td><td>"+q.actfecha+"</td><td> "+btnDescargaArchivoChild+"</td><td>"+d+"</td></tr></td></tr>");
});}c.prepend("<tr role='row' class='odd row-parent'><td>"+n.parent.actnombre+"</td><td>"+n.parent.actdescrip+"</td><td><span class='pull-center badge bg-"+f+"'>"+g+"</span></td><td>"+n.parent.actfecha+"</td><td>"+btnDescargaArchivoEs+"</td><td> "+b+"</td></tr>");
document.getElementById("tbl_actuacion_det").rows[4].cells[1].innerHTML=n.parent.actnombre;document.getElementById("tbl_actuacion_det").rows[5].cells[1].innerHTML=n.parent.actdescrip;
document.getElementById("tbl_actuacion_det").rows[6].cells[1].innerHTML=n.parent.actdocenrecomendac;});}function showBtn(a){$("#btnActDoc"+a).show();}function hideBtn(a){$("#btnActDoc"+a).hide();
}function Mostrar(b){var a="/actuaciones/"+b.value+"/edit";$.get(a,function(c){$("#idact").val(c.id);$("#idact2").val(c.id);$("#lab-txt-doc").text(c.actdocnompropio);
$("#actnombre").val(c.actnombre);$("#actfecha").val(c.actfecha);$("#actdescrip").text(c.actdescrip);$("#actestado > option[value="+c.actestado+"]").attr("selected",true);
$("#actdocenrecomendac").text(c.actdocenrecomendac);$(".lab_id_act").text(c.id);$("#parent_actuacion_id").val(c.parent.parent_rev_actid);if(c.actdocnompropio_docente!=""){$("#lab_doc_file").text(c.actdocnompropio_docente);
}else{$("#lab_doc_file").text("La actuación no tiene archivo");}if(c.actdocnompropio!=""){$(".lab_doc_file_est").text(c.actdocnompropio);}else{$(".lab_doc_file_est").text("La actuación no tiene archivo");
}$("#act_id").val(c.id);llenarModalDetails(c);});}function llenarModalDetails(a){$("#actexpid_det").val(a.id);$("#actfecha_det").val(a.actdocenfechamod);
$("#actnombre_det").val(a.actnombre);$("#actdescrip_det").val(a.actdescrip);$("#actestado_det > option[value="+a.actestado+"]").attr("selected",true);$("#label_nombre_docente").text(a.docente_update.name+" "+a.docente_update.lastname);
rutadescarga="/actpdfdownload/"+a.id+"/docente";if(a.actdocnompropio_docente!=""){$("#lab-nombre-doc").html('<a href="'+rutadescarga+'" target="_blank">'+a.actdocnompropio_docente+"</a>");
}else{$("#lab-nombre-doc").html("<i>Sin archivo</i>");}$("#actdocenrecomendac_det").val(a.actdocenrecomendac);}function updateActuacion(){var f=validateForm("myform_act_edit");
if(f<=0){var d=$("#idact").val();var e="#myform_act_edit";var b="/actuaciones/update/"+d+"";var c=$("#token").val();var a=new FormData(document.getElementById("myform_act_edit"));
$("#myModal_act_edit").modal("toggle");$.ajax({url:b,headers:{"X-CSRF-TOKEN":c},type:"POST",datatype:"json",data:a,cache:false,contentType:false,processData:false,beforeSend:function(g){$("#wait").css("display","block");
},success:function(g){console.log(g);$("#msg-success").fadeIn();$(e)[0].reset();ListarTabla(0);$("#wait").css("display","none");},error:function(h,i,g){alert("Hubo un error con el servidor ERROR::"+g,i);
}});}}$("#btn_act_edit_docen").click(function(){var f=validateForm("myform_act_edit_docen");if(f<=0){var c=$("#idact").val();var e="#myform_act_edit_docen";
var a="/actuaciones/store/revision";var b=$("#token").val();var d=new FormData(document.getElementById("myform_act_edit_docen"));$("#myModal_act_edit").modal("toggle");
$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"POST",datatype:"json",data:d,cache:false,contentType:false,processData:false,beforeSend:function(g){$("#wait").css("display","block");
},success:function(g){console.log(g);$("#msg-success").fadeIn();$(e)[0].reset();ListarTabla(0);$("#wait").css("display","none");},error:function(h,i,g){alert("Hubo un error con el servidor ERROR::"+g,i);
}});}});$("#btn_act_edit_doc").click(function(f){f.preventDefault();f.stopPropagation();var c=$("#idact2").val();var g="#myform_act_edit_doc";var a="/actuaciones/update/doc/"+c+"";
var b=$("#token").val();var d=new FormData(document.getElementById("myform_act_edit_doc"));$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"POST",data:d,cache:false,contentType:false,processData:false,beforeSend:function(h){var e=new XMLHttpRequest();
e.upload.addEventListener("progress",function(){},false);$("#wait").css("display","block");},success:function(e){console.log(e);$("#datos").empty();$(g)[0].reset();
ListarTabla(0);$("#myModal_act_edit_doc").modal("toggle");$("#wait").css("display","none");},error:function(h,i,e){alert("Hubo un error con el servidor ERROR::"+e,i);
}});});function eliminarAct(d){var c=confirm("¿Está seguro de eliminar el registro");if(c){var a="/actuaciones/"+d.value;var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"DELETE",datatype:"json",data:d.value,success:function(e){console.log(e);
$("#msg-success").fadeIn();$("#datos").html("");ListarTabla(0);},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});}}$("#btn_enviar_req").click(function(){var a=$("#fechareq").val()+" "+$("#horareq").val();
$("#reqfechahoracomp12").val(a);});$("#btn_enviar_req").click(function(){var d="#myform_req";var a="/requerimientos";var b=$("#token").val();var c=validateForm("myform_req");
if(c.length<=0){$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"POST",datatype:"json",data:$(d).serialize(),success:function(e){$("#msg-success").fadeIn();
$(d)[0].reset();$("#mymodal").modal("hide");ListarTabla_req(0);},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});}$("#btn_modal_req").click(function(){$("#msg-success").hide();
});});$(document).ready(ListarTabla_req(0));function ListarTabla_req(c){var d=$("#id_control_list_req").val();if(d){var a="/requerimientos";var b=$("#token").val();
$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"GET",datatype:"json",data:{id_control_list_req:d,bandera:c},success:function(e){llenarTabla_req(e);},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);
}});}}function llenarTabla_req(j){var a=$("#datos_req");a.html("");var k;console.log(j);var d="";var b="";var c="";var g="";var h="";var e=new Date();var i=(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate());
$(j.requerimientos).each(function(l,m){k="/reqpdfgen/"+m.id;var f="<a href='"+k+"' target='_blank' class='btn btn-warning btn-block' role='button'>Imprimir</a>";
if(m.expestado=="3"||m.expestado=="2"){d="";b="";}else{if(j.userSession.name=="estudiante"){if(!m.reqentregado){d="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_edit'  class='btn btn-primary btn-block' role='button'>Editar</a>";
b="<a href='#'  class='btn btn-danger btn-block' OnClick='delReq("+m.id+")' role='button'>Eliminar</a>";}if(i==m.reqfecha){console.log("si");}else{console.log(i);
}c="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_asist'  class='btn btn-primary btn-block' role='button'>Comentar</a>";
g="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_details'  class='btn btn-success btn-block' role='button'>Detalles</a>";
}if(j.userSession.name=="docente"){c="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_asist'  class='btn btn-primary btn-block' role='button'>Calificar</a>";
g="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_details'  class='btn btn-success btn-block' role='button'>Detalles</a>";
}if(j.userSession.name=="coordprac"){c="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_asist'  class='btn btn-primary btn-block' role='button'>Asistencia</a>";
g="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_details'  class='btn btn-success btn-block' role='button'>Detalles</a>";
}if(j.userSession.name=="amatai"){g="<a href='#' data-toggle='modal' OnClick='searchReq("+m.id+")' data-target='#myModal_req_details'  class='btn btn-success btn-block' role='button'>Detalles</a>";
if(!m.reqentregado){h="<a href='#' OnClick='changeStateReq("+m.id+")'   class='btn btn-primary btn-block' role='button'>Marcar como Entregado</a>";}else{h="<a href='#' OnClick='changeStateReq("+m.id+")'   class='btn btn-danger btn-block' role='button'>Marcar como No Entregado</a>";
}}}row="<tr role='row' class='odd'>";row+="<td>"+m.created_at+"</td>";row+="<td>"+m.reqmotivo+"</td>";row+="<td>"+m.reqfecha+"</td>";row+="<td>"+m.reqhora+"</td>";
row+="<td>"+m.req_asistencia.ref_reqasistencia+"</td>";if(m.reqentregado){row+="<td> Entregado</td>";}else{row+="<td> Sin entregar</td>";}row+="<td>"+f+" "+d+" "+b+" "+c+" "+g+" "+h+"</td>";
row+="</tr>";a.prepend(row);});}function searchReq(c){var a="/requerimientos/"+c+"/edit";var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"GET",datatype:"json",data:{id_req:c},success:function(d){console.log(d);
llenarFormEditReq(d);llenarModalDetailsReq(d);llenarModalUpdateReq(d);},error:function(e,f,d){alert("Hubo un error con el servidor ERROR::"+d,f);}});}function llenarFormEditReq(a){$("#reqid").val(a.requerimiento.id);
$("#reqfecha").val(a.requerimiento.created_at);$("#fechareq").val(a.requerimiento.fechareq);$("#horareq").val(a.requerimiento.horareq);$("#reqmotivo").val(a.requerimiento.reqmotivo);
$("#reqdescrip").val(a.requerimiento.reqdescrip);}function llenarModalUpdateReq(a){$("#req_id").val(a.requerimiento.id);$("#lab_cod_exp").text(a.requerimiento.expediente.expid);
$("#lab_fech_crea").text(a.requerimiento.created_at);$("#lab_ced_solic").text(a.requerimiento.expediente.solicitante.idnumber);$("#lab_nom_solic").text(a.requerimiento.expediente.solicitante.name);
$("#lab_apell_solic").text(a.requerimiento.expediente.solicitante.lastname);$("#lab_fech_cita").text(a.requerimiento.reqfecha);$("#lab_hora_cita").text(a.requerimiento.reqhora);
}function llenarModalDetailsReq(a){$("#req_id_det").val(a.requerimiento.id);$("#lab_cod_exp_det").text(a.requerimiento.expediente.expid);$("#lab_fech_crea_det").text(a.requerimiento.created_at);
$("#lab_ced_solic_det").text(a.requerimiento.expediente.solicitante.idnumber);$("#lab_nom_solic_det").text(a.requerimiento.expediente.solicitante.name);
$("#lab_apell_solic_det").text(a.requerimiento.expediente.solicitante.lastname);$("#lab_fech_cita_det").text(a.requerimiento.reqfecha);$("#lab_hora_cita_det").text(a.requerimiento.reqhora);
}function actReq(){var d=validateForm("myform_req_edit");if(d<=0){var c=$("#reqid").val();var a="/requerimientos/"+c+"";var b=$("#token").val();$("#myModal_req_edit").modal("hide");
$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"PUT",datatype:"json",data:$("#myform_req_edit").serialize(),beforeSend:function(e){$("#wait").css("display","block");
},success:function(e){console.log(e);ListarTabla_req(0);$("#wait").css("display","none");},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);
}});}}function delReq(d){var c=confirm("¿Está seguro de eliminar en registro?");if(c){var a="/requerimientos/"+d+"";var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"DELETE",datatype:"json",data:{id:d},success:function(e){console.log(e);
ListarTabla_req(0);},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});}}function llenarTabla_cierre_caso(a){var b=$("#datos_cierre_caso");
$(a).each(function(c,d){$("#expcierrecasonotadocen2").val(a.expcierrecasonotadocen);$("#expcierrecasonotaest2").val(a.expcierrecasonotaest);$("#expcierrecasocpto2 > option[value="+a.expcierrecasocpto+"]").attr("selected",true);
$("#expestado2 > option[value="+a.expestado+"]").attr("selected",true);});}$("#btn_exp_user_carga").click(function(){$("#msg-success").hide();var b=$("#btn_exp_user_carga").val();
var a="/expuser/"+b+"/edit";$.get(a,function(c){$("#id").val(c.id);$("#idnumber").val(c.idnumber);$("#name").val(c.name);$("#lastname").val(c.lastname);
$("#description").val(c.description);$("#address").val(c.address);$("#email").val(c.email);$("#tel1").val(c.tel1);$("#tel2").val(c.tel2);$("#estrato > option[value="+c.estrato+"]").attr("selected",true);
$("#estadocivil > option[value="+c.estadocivil+"]").attr("selected",true);$("#genero > option[value="+c.genero+"]").attr("selected",true);if(c.pbesena=="1"){$("#pbesena").attr("checked",true);
}else{$("#pbesena").attr("checked",false);}if(c.pbepersondiscap=="1"){$("#pbepersondiscap").attr("checked",true);}else{$("#pbepersondiscap").attr("checked",false);
}if(c.pbevictimconflic=="1"){$("#pbevictimconflic").attr("checked",true);}else{$("#pbevictimconflic").attr("checked",false);}if(c.pbeadultomayor=="1"){$("#pbeadultomayor").attr("checked",true);
}else{$("#pbeadultomayor").attr("checked",false);}if(c.pbeminoetnica=="1"){$("#pbeminoetnica").attr("checked",true);}else{$("#pbeminoetnica").attr("checked",false);
}if(c.pbemadrecomuni=="1"){$("#pbemadrecomuni").attr("checked",true);}else{$("#pbemadrecomuni").attr("checked",false);}if(c.pbecabezaflia=="1"){$("#pbecabezaflia").attr("checked",true);
}else{$("#pbecabezaflia").attr("checked",false);}if(c.pbeninguna=="1"){$("#pbeninguna").attr("checked",true);$(".check-user").attr("disabled",true);}else{$("#pbeninguna").attr("checked",false);
$(".check-user").attr("disabled",false);}if(c.tipodoc!="."){$("#tipodoc > option[value="+c.tipodoc+"]").attr("selected",true);}});});$("#btn_exp_user_edit").click(function(){var c=$("#id").val();
var d="#myform_exp_user_edit";var a="/expuser/"+c+"";var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"PUT",datatype:"json",data:$("#myform_exp_user_edit").serialize(),success:function(e){$("#msg-success").fadeIn();
},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});});$("#btn_exp_user_create").click(function(){var d="#myform_exp_user_create";
var a="/expuser";var b=$("#token").val();var c=validateForm("myform_exp_user_create");if(c.length<=0){$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"POST",datatype:"json",data:$(d).serialize(),success:function(e){$(d)[0].reset();
$("#myModal_exp_user_create .close").click();$("#expidnumber").val(e.idnumber);$("#msg-success").fadeIn();},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);
}});}});$("#myFormExpsStore").submit(function(){var a=validateForm("myFormExpsStore");if(a.length>0){return false;}else{return true;}});function validateForm(a){var b=[];
$("#"+a+" .required").each(function(c,d){if($(this).val()==""){b.push("El campo "+$(this).attr("data-name")+" es obligatorio");$(this).css({background:"#FDEDEC",border:"1px solid #EAEDED"});
$(this).attr("placeholder","Requerido");console.log($(this));}else{if($(this).val()!=""){$(this).css({background:"#fff",border:"1px solid #EAEDED"});}}});
return b;}$("#btn_exp_user_cargar_create").click(function(){$("#msg-success").hide();});function comprIdnumber(){var b=$.trim($("#idnumber").val());var a="/expuser/"+b+"";
$("#email").val(b+"@mail.com");var c="#myform_exp_user_create";$.get(a,function(d){if(d.length>0){$(d).each(function(f,e){$("#btn_exp_user_create").hide();
$("#btn_exp_user_create_edit").fadeIn();$("#id").val(e.id);$("#idnumber").val(e.idnumber);$("#name").val(e.name);$("#lastname").val(e.lastname);$("#description").val(e.description);
$("#address").val(e.address);$("#email").val(e.email);$("#tel1").val(e.tel1);$("#tel2").val(e.tel2);$("#estrato > option[value="+e.estrato+"]").attr("selected",true);
$("#estadocivil > option[value="+e.estadocivil+"]").attr("selected",true);$("#genero > option[value="+e.genero+"]").attr("selected",true);if(e.pbesena=="1"){$("#pbesena").attr("checked",true);
}else{$("#pbesena").attr("checked",false);}if(e.pbepersondiscap=="1"){$("#pbepersondiscap").attr("checked",true);}else{$("#pbepersondiscap").attr("checked",false);
}if(e.pbevictimconflic=="1"){$("#pbevictimconflic").attr("checked",true);}else{$("#pbevictimconflic").attr("checked",false);}if(e.pbeadultomayor=="1"){$("#pbeadultomayor").attr("checked",true);
}else{$("#pbeadultomayor").attr("checked",false);}if(e.pbeminoetnica=="1"){$("#pbeminoetnica").attr("checked",true);}else{$("#pbeminoetnica").attr("checked",false);
}if(e.pbemadrecomuni=="1"){$("#pbemadrecomuni").attr("checked",true);}else{$("#pbemadrecomuni").attr("checked",false);}if(e.pbecabezaflia=="1"){$("#pbecabezaflia").attr("checked",true);
}else{$("#pbecabezaflia").attr("checked",false);}if(e.pbeninguna=="1"){$("#pbeninguna").attr("checked",true);$(".check-user").attr("disabled",true);}else{$("#pbeninguna").attr("checked",false);
$(".check-user").attr("disabled",false);}if(e.tipodoc!="."){$("#tipodoc > option[value="+e.tipodoc+"]").attr("selected",true);}});}});}$("#pbeninguna").click(function(){if($("#pbeninguna").prop("checked")){$("#pbesena").attr("checked",false);
$("#pbepersondiscap").attr("checked",false);$("#pbevictimconflic").attr("checked",false);$("#pbeadultomayor").attr("checked",false);$("#pbeminoetnica").attr("checked",false);
$("#pbemadrecomuni").attr("checked",false);$("#pbecabezaflia").attr("checked",false);$("#pbesena").attr("disabled",true);$("#pbepersondiscap").attr("disabled",true);
$("#pbevictimconflic").attr("disabled",true);$("#pbeadultomayor").attr("disabled",true);$("#pbeminoetnica").attr("disabled",true);$("#pbemadrecomuni").attr("disabled",true);
$("#pbecabezaflia").attr("disabled",true);}else{$("#pbesena").attr("checked",true);$("#pbepersondiscap").attr("checked",true);$("#pbevictimconflic").attr("checked",true);
$("#pbeadultomayor").attr("checked",true);$("#pbeminoetnica").attr("checked",true);$("#pbemadrecomuni").attr("checked",true);$("#pbecabezaflia").attr("checked",true);
$("#pbesena").attr("disabled",false);$("#pbepersondiscap").attr("disabled",false);$("#pbevictimconflic").attr("disabled",false);$("#pbeadultomayor").attr("disabled",false);
$("#pbeminoetnica").attr("disabled",false);$("#pbemadrecomuni").attr("disabled",false);$("#pbecabezaflia").attr("disabled",false);}});$("#btn_exp_user_create_edit").click(function(){var c=$("#id").val();
var d="#myform_exp_user_create";var a="/expuser/"+c+"";var b=$("#token").val();errors=validateForm("myform_exp_user_create");if(errors.length<=0){$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"PUT",datatype:"json",data:$("#myform_exp_user_create").serialize(),success:function(e){$("#expidnumber").val(e.idnumber);
$(d)[0].reset();$("#myModal_exp_user_create .close").click();$("#msg-success").fadeIn();$("#btn_exp_user_create_edit").hide();$("#btn_exp_user_create").fadeIn();
},error:function(f,g,e){alert("Hubo un error con el servidor ERROR::"+e,g);}});}});$(".notac").change(function(){var d=parseFloat($("#notcasocol1").val());
var c=parseFloat($("#notcasocol2").val());var a=parseFloat($("#notcasocol3").val());if(d>5){alert("La nota no puede ser mayor a 5");$("#notcasocol1").val("");
}if(c>5){alert("La nota no puede ser mayor a 5");$("#notcasocol2").val("");}if(a>5){alert("La nota no puede ser mayor a 5");$("#notcasocol3").val("");}if(!isFinite(d)){var d=parseFloat(0);
}if(!isFinite(c)){var c=parseFloat(0);}if(!isFinite(a)){var a=parseFloat(0);}var b=(d+c+a)/3;$("#nottotcol1").val(b.toFixed(1));sumaTotalNotas();});$(".notaa").change(function(){var d=parseFloat($("#notactcol1").val());
var c=parseFloat($("#notactcol2").val());var a=parseFloat($("#notactcol3").val());if(d>5){alert("La nota no puede ser mayor a 5");$("#notactcol1").val("");
}if(c>5){alert("La nota no puede ser mayor a 5");$("#notactcol2").val("");}if(a>5){alert("La nota no puede ser mayor a 5");$("#notactcol3").val("");}if(!isFinite(d)){var d=parseFloat(0);
}if(!isFinite(c)){var c=parseFloat(0);}if(!isFinite(a)){var a=parseFloat(0);}var b=(d+c+a)/3;$("#nottotcol2").val(b.toFixed(1));sumaTotalNotas();});$(".notar").change(function(){var d=parseFloat($("#notreqcol1").val());
var c=parseFloat($("#notreqcol2").val());var a=parseFloat($("#notreqcol3").val());if(d>5){alert("La nota no puede ser mayor a 5");$("#notreqcol1").val("");
}if(c>5){alert("La nota no puede ser mayor a 5");$("#notreqcol2").val("");}if(a>5){alert("La nota no puede ser mayor a 5");$("#notreqcol3").val("");}if(!isFinite(d)){var d=parseFloat(0);
}if(!isFinite(c)){var c=parseFloat(0);}if(!isFinite(a)){var a=parseFloat(0);}var b=(d+c+a)/3;$("#nottotcol3").val(b.toFixed(1));sumaTotalNotas();});function sumaTotalNotas(){var d=parseFloat($("#notcasocol1").val());
var c=parseFloat($("#notcasocol2").val());var a=parseFloat($("#notcasocol3").val());if(!isFinite(d)){var d=parseFloat(0);}if(!isFinite(c)){var c=parseFloat(0);
}if(!isFinite(a)){var a=parseFloat(0);}var b=(d+c+a)/3;$("#nottotcol4").val(b.toFixed(1));}$("#btn_calificaciones_create").click(function(){var c="#myform_califica_create";
var a="/notas";var b=$("#token").val();$.ajax({url:a,headers:{"X-CSRF-TOKEN":b},type:"post",datatype:"json",data:$("#myform_califica_create").serialize(),cache:false,success:function(d){alert("¡Notas guardadas con éxito!");
},error:function(e,f,d){alert("Hubo un error con el servidor ERROR::"+d,f);}});});